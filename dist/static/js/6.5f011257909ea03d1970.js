webpackJsonp([6],{"3pNs":function(e,t){},MB8q:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("TVG1"),r={name:"createForm",components:{},props:{formItem:{type:Object,default:function(){return{operator:[]}}}},data:function(){return{roles:[],resources:[],operators:[{value:"get",label:"查询"},{value:"post",label:"新增"},{value:"put",label:"更新"},{value:"delete",label:"删除"}],roleSelect:""}},watch:{},methods:{roleList:function(){var e=this;o.a.ajax.get("/role").then(function(t){if(200==t.data.code){var a=t.data.data;for(var o in a)e.roles.push({value:a[o].id,label:a[o].roleDesc})}else e.$Message.error("角色拉取失败")}).catch(function(e){console.log(e)})},resourceList:function(){var e=this;o.a.ajax.get("/resource").then(function(t){if(200==t.data.code){var a=t.data.data;for(var o in a)e.resources.push({value:a[o].id,label:a[o].resDesc})}else e.$Message.error("资源拉取失败")}).catch(function(e){console.log(e)})}},mounted:function(){this.roleList(),this.resourceList()},activated:function(){}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Form",{attrs:{model:e.formItem}},[a("Row",[a("Col",{attrs:{span:"6"}},[a("FormItem",{attrs:{label:"角色:","label-width":40}},[a("Select",{attrs:{clearable:""},model:{value:e.formItem.roleId,callback:function(t){e.$set(e.formItem,"roleId",t)},expression:"formItem.roleId"}},e._l(e.roles,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}))],1)],1),e._v(" "),a("Col",{attrs:{span:"6"}},[a("FormItem",{attrs:{label:"资源:","label-width":40}},[a("Select",{attrs:{clearable:""},model:{value:e.formItem.resId,callback:function(t){e.$set(e.formItem,"resId",t)},expression:"formItem.resId"}},e._l(e.resources,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}))],1)],1)],1),e._v(" "),a("Row",[a("Col",{attrs:{span:"11"}},[a("FormItem",{attrs:{label:"允许的操作:","label-width":80}},[a("Select",{attrs:{clearable:"",multiple:""},model:{value:e.formItem.operator,callback:function(t){e.$set(e.formItem,"operator",t)},expression:"formItem.operator"}},e._l(e.operators,function(t){return a("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}))],1)],1)],1)],1)],1)},staticRenderFns:[]};var s={name:"resource",components:{createForm:a("VU/8")(r,l,!1,function(e){a("epv+")},null,null).exports},data:function(){var e=this;return{likeInput:"",model1:"",showDetail:!1,showCreateForm:!1,showIdDetail:"",cityList:[],modalTitle:"",columns1:[{title:"角色",key:"roleName"},{title:"资源",key:"resName"},{title:"资源描述",key:"resDesc"},{title:"允许的操作",key:"operator"},{title:"创建日期",key:"created_date"},{title:"更新日期",key:"updated_date"},{title:"操作",key:"action",width:150,align:"center",render:function(t,a){return t("div",[t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.showUpdateFrom(a.row)}}},"编辑"),t("Button",{props:{type:"error",size:"small"},on:{click:function(){e.deletePrivilege(a.row.id)}}},"删除")])}}],formItem:{resName:"",resDesc:"",resId:null,roleId:null,operator:[]},modalType:"",tableData:[]}},methods:{showCreateFrom:function(){this.modalTitle="配置权限",this.modalType="create",this.showCreateForm=!0},showUpdateFrom:function(e){for(var t in this.modalTitle="修改权限",this.modalType="update",e)this.formItem[t]=e[t];this.formItem.operator=this.formItem.operator.split(","),this.showCreateForm=!0},rowClassName:function(e,t){return"table-info-pointer"},ok:function(){null!=this.formItem.operator&&(this.formItem.operator=this.formItem.operator.join(",")),"create"==this.modalType?this.createPrivilege(this.formItem):"update"==this.modalType&&this.updatePrivilege(this.formItem)},cancel:function(){this.showCreateForm=!1},createPrivilege:function(e){var t=this;o.a.ajax.post("/privilege",e).then(function(e){200==e.data.code?t.$Message.info("权限创建成功!"):t.$Message.info("权限创建失败!"),t.privilegeList()})},updatePrivilege:function(e){var t=this;o.a.ajax.put("/privilege",e).then(function(e){200==e.data.code?t.$Message.info("权限更新成功!"):t.$Message.info("权限更新失败!"),t.privilegeList()})},deletePrivilege:function(e){var t=this;o.a.ajax.delete("/privilege/"+e).then(function(e){200==e.data.code?t.$Message.info("权限删除成功!"):t.$Message.info("权限删除失败!"),t.privilegeList()})},privilegeList:function(){var e=this;o.a.ajax.get("/privilege").then(function(t){if(200==t.data.code){var a=t.data.data;for(var r in a)a[r].created_date=o.a.formatDate(new Date(a[r].created_date),"yyyy-MM-dd hh:mm:ss"),a[r].updated_date=o.a.formatDate(new Date(a[r].updated_date),"yyyy-MM-dd hh:mm:ss");e.tableData=a}else e.$Message.error("权限拉取失败")}).catch(function(e){console.log(e)})}},mounted:function(){this.privilegeList()}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Row",[a("Card",[a("Row",{attrs:{gutter:24}},[a("Col",{attrs:{span:"6"}},[a("Input",{attrs:{placeholder:"关键字查询",size:"large"},model:{value:e.likeInput,callback:function(t){e.likeInput=t},expression:"likeInput"}},[a("Button",{attrs:{slot:"append",type:"primary",icon:"ios-search"},slot:"append"})],1)],1),e._v(" "),a("Col",{attrs:{span:"3",offset:"15"}},[a("Button",{attrs:{type:"info",long:"",icon:"plus-round",size:"large"},on:{click:e.showCreateFrom}},[e._v("配置权限")])],1)],1)],1)],1),e._v(" "),a("Row",{staticClass:"margin-top-10"},[a("Card",[a("Row",[a("Col",{attrs:{span:"24"}},[a("Table",{attrs:{"row-class-name":e.rowClassName,height:"400",columns:e.columns1,data:e.tableData}})],1)],1)],1)],1),e._v(" "),a("Modal",{attrs:{width:"888",styles:{top:"20px"}},on:{"on-ok":e.ok,"on-cancel":e.cancel},model:{value:e.showCreateForm,callback:function(t){e.showCreateForm=t},expression:"showCreateForm"}},[a("p",{staticStyle:{color:"#f60","text-align":"left"},attrs:{slot:"header"},slot:"header"},[a("Icon",{attrs:{type:"information-circled"}}),e._v(" "),a("span",[e._v(e._s(e.modalTitle))])],1),e._v(" "),a("create-form",{attrs:{formItem:e.formItem}})],1)],1)},staticRenderFns:[]};var i=a("VU/8")(s,n,!1,function(e){a("3pNs")},null,null);t.default=i.exports},"epv+":function(e,t){}});
//# sourceMappingURL=6.5f011257909ea03d1970.js.map